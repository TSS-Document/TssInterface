# 规则

---

## 考试初始化

为了方便老师修改考试信息,所以在考试开始前1小时初始化考试.

考虑实现方式为**每10分钟**检测一次assignment表,如果有

```
startAt - now() < 1h &&
gitInitStatus == notyet
```

就对它进行初始化.并将gitInitStatus置位initing

考试初始化分两个部分:

1.数据库score\_detail表初始化.  
即根据assignment的题目和人员,对每一个人和每一道题建立一行.

2.git仓库初始化  
使用gitlab系统接口初始化仓库,若没有创建失败的,将assignment的init\_status设为success,否则设为fail,并**将失败名单插入assignment\_init\_error表**

## 考试开始的判定

如果一个考试的init状态为success,且**服务器传回来的current time**在startAt和endAt之间,就视为考试开始.

## 学生查看考试

学生可以看到已经创建的考试,但**在考试结束前**,不能看到具体题目

## 老师查看考试

老师可以看到已经创建的考试,并且**对于自己的课程,**可以进入看到具体题目

## 老师修改考试

老师在考试开始前1h之内,**不能**再修改考试的**开始时间**,**题目**和**人员名单**. 名称,结束时间,描述仍可以修改.

## 待审核题目

创建考试选题目时,只能搜到审核通过的题目.

老师查看自己的题目时,可以看到自己的待审核题目.

审核权限老师进入审核页面时,可以看到待审核题目.

## 题目的url

后端不返回题目的gitUrl.

只有在审核题目和上传题目时,返回题目的fileUrl.

## 学生的考试结果

每个考试题有三个属性:**分数**,**scoreUrl**,**analyzeUrl.**三个属性分别得出,无法确定具体时间.原则上得出的先后顺序为

`分数 scoreUrl analyzeUrl`

## /user/{username}/\*\*

这类url需要判定username是否与验证信息中的username一样.即只能查询自己的信息.

## 保留的username

username不能为**auth**



